plugins {
    id "java"
    id "groovy"
    id "org.jenkins-ci.jpi" version "0.43.0"
}

jenkinsPlugin {
    jenkinsVersion = (rootProject.file("Dockerfile").text =~ /JENKINS_VERSION=([0-9.]+)/)[0][1]
    fileExtension = "jpi"
}

test {
    reports {
        junitXml.enabled = true
        html.enabled = false
    }
}

dependencies {
    implementation "org.jenkins-ci.plugins:git:4.7.1"
    implementation "org.jenkins-ci.plugins.workflow:workflow-job:2.40"

    testCompile "org.spockframework:spock-core:1.3-groovy-2.4"
    testCompile "cglib:cglib-nodep:3.3.0"
    testCompile "org.objenesis:objenesis:3.2"
    testCompile "org.codehaus.groovy.modules.http-builder:http-builder:0.7.1"

    testCompile "org.jenkins-ci.plugins.workflow:workflow-api:2.40"
    testCompile "org.jenkins-ci.plugins.workflow:workflow-basic-steps:2.20"
    testCompile "org.jenkins-ci.plugins.workflow:workflow-cps:2.83"
    testCompile "org.jenkins-ci.plugins.workflow:workflow-scm-step:2.12"
    testCompile "org.jenkins-ci.plugins:cloudbees-folder:6.15"
    testCompile 'org.jenkins-ci.modules:instance-identity:2.1'
}


